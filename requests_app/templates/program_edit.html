{% extends 'base.html' %}

{% block content %}
    <h1 class="text-3xl font-bold mb-4">Edit Program</h1>

    <h2 class="text-2xl font-bold mt-8 mb-4">Edit Program Details</h2>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="bg-blue-500 text-white px-4 py-2">Save</button>
        <a href="{% url 'program_detail' program.id %}" class="text-blue-500 hover:underline">Cancel</a>
    </form>

    <h2 class="text-2xl font-bold mt-8 mb-4">Members</h2>
    <ul>
        {% for member, member_form in members_and_forms %}
            <li class="mb-2">
                {{ member.user.username }} ({{ member.member_type.type_name }})
                <form method="post" action="{% url 'edit_member' member.id %}" class="inline">
                    {% csrf_token %}
                    {{ member_form }}
                    <button type="submit" class="bg-blue-500 text-white px-2 py-1">Change</button>
                </form>
                <form method="post" action="{% url 'remove_member' member.id %}" class="inline">
                    {% csrf_token %}
                    <button type="submit" class="bg-red-500 text-white px-2 py-1">Remove</button>
                </form>
            </li>
        {% endfor %}
    </ul>

    <h2 class="text-2xl font-bold mt-8 mb-4">Add Member</h2>
    <form method="post" action="{% url 'add_member' program.id %}">
        {% csrf_token %}
        {{ member_form.as_p }}
        <button type="submit" class="bg-blue-500 text-white px-4 py-2">Add Member</button>
    </form>
{% endblock %}
